/**
 *
 * ð‘¢ï¼Œð‘£ ä¸¤ä¸ªåºåˆ—è¶‹åŠ¿ç›¸åŒï¼Œå½“ä¸”ä»…å½“å¯¹äºŽä»»æ„ ð‘™ å’Œ ð‘Ÿï¼Œå‡æœ‰ ð‘…ð‘€ð‘„ (ð‘¢,ð‘™,ð‘Ÿ)=ð‘…ð‘€ð‘„(ð‘£,ð‘™,ð‘Ÿ) (1 â‰¤ ð‘™ â‰¤ ð‘Ÿ â‰¤ ð‘›)ï¼Œ
 * å…¶ä¸­ ð‘› æ˜¯åºåˆ—é•¿åº¦ï¼Œð‘…ð‘€ð‘„(ð‘¢, ð‘™, ð‘Ÿ) æ˜¯ ð‘¢ åºåˆ—ä»Ž ð‘™ åˆ° ð‘Ÿ ä¸­çš„æœ€å°å€¼ï¼ˆæœ‰å¯èƒ½æœ‰å¤šä¸ªæœ€å°å€¼ï¼‰çš„æœ€å¤§ä¸‹æ ‡ã€‚
 *
 * çŽ°æœ‰ä¸¤ä¸ªåºåˆ— ð´={ð‘Ž1, ð‘Ž2, ð‘Ž3, â€¦, ð‘Žð‘›}ï¼Œðµ={ð‘1, ð‘2, ð‘3, â€¦, ð‘ð‘›} ä¸¤ä¸ªåºåˆ—
 * è¯·æ±‚å‡ºæœ€å¤§çš„ ð‘ï¼Œä½¿å¾— ð´â€˜={ð‘Ž1, ð‘Ž2, ð‘Ž3, â€¦, ð‘Žð‘} ä¸Ž ðµâ€˜={ð‘1, ð‘2, ð‘3, â€¦, ð‘ð‘} è¶‹åŠ¿ç›¸åŒã€‚
 *
 * eg:
 * è¾“å…¥ä¸ºï¼š
 * 5
 * 3 1 5 2 4
 * 5 2 4 3 1
 *
 * è¾“å‡ºä¸ºï¼š
 * 4
 */

/**
 *
 * æ€è·¯ï¼š
 *    é¢˜ç›®æ˜Žæ˜¾è¦æ±‚çš„æ˜¯å›ºå®šæœ«å°¾çš„ RMQ é—®é¢˜ï¼Œæ‰€ä»¥ä½¿ç”¨å•è°ƒé˜Ÿåˆ—æ¥è§£ä½“
 *    é¢˜ç›®è¦æ±‚çš„åœ¨ å‰ p ä¸ªå…ƒç´  çš„åŒºé—´å†…ï¼Œ A' ä¸Ž B' è¶‹åŠ¿ç›¸åŒï¼Œæ‰€ä»¥åŒºé—´å†…å®ƒä¿©å¯¹åº”çš„å•è°ƒé˜Ÿåˆ—ä¸­çš„å…ƒç´ æ•°é‡ç›¸åŒ
 *    å¦‚æžœå‡ºçŽ°æ•°é‡ä¸åŒï¼Œåˆ™è¡¨æ˜Žæ–°åŠ å…¥çš„å…ƒç´ ä»¥åŠè¶…è¿‡ p åˆç†çš„èŒƒå›´
 *
 *
 * @param {*} n åºåˆ—é•¿åº¦
 * @param {*} a åºåˆ— a
 * @param {*} b åºåˆ— b
 */
const twin = (n, a, b) => {
  let p;
  let q_a = [];
  let q_b = [];
  for (p = 0; p < n; p++) {
    while (q_a.length && q_a[q_a.length - 1] > a[p]) q_a.pop();
    while (q_b.length && q_b[q_b.length - 1] > b[p]) q_b.pop();
    q_a.push(a[p]);
    q_b.push(b[p]);

    if (q_a.length !== q_b.length) break;
  }

  return p;
};

console.log(twin(5, [3, 1, 5, 2, 4], [5, 2, 4, 3, 1])); // 4
